from sqlalchemy import Column, Integer, BigInteger, String, Float, DateTime, ForeignKey
from sqlalchemy.orm import declarative_base

Base = declarative_base()

# -------------------------------
# DATABASE MODELS
# -------------------------------
class ComplianceTrip(Base):
    __tablename__ = 'compliance_trips'

    id = Column(Integer, primary_key=True, autoincrement=True)
    train_id = Column(String)
    ems_login_miles = Column(Float)
    ems_available_miles = Column(Float)
    ems_auto_miles = Column(Float)
    lead_locomotive = Column(String)
    lead_locomotive_model = Column(String)
    train_symbol = Column(String)
    ems_software_version = Column(String)
    ems_login_utc = Column(DateTime)
    ems_logout_utc = Column(DateTime)
    tripsum_id = Column(Integer, ForeignKey('trip_summary.tripsum_id'), index=True)

class TripSummary(Base):
    __tablename__ = 'trip_summary'

    tripsum_id = Column(Integer, primary_key=True, autoincrement=True)
    loco_activity_key = Column(String, unique=True)
    train_id = Column(String)
    lead_loco = Column(String)
    start_time_gmt = Column(DateTime)
    trip_summary_time_gmt = Column(DateTime)
    total_trip_miles = Column(Float)
    total_avail_dist = Column(Float)
    total_auto_dist = Column(Float)
    total_ptc_active_dist = Column(Float)
    origin_name = Column(String)
    origin_ptc_name = Column(String)
    destination_name = Column(String)
    destination_ptc_name = Column(String)
    operating_mode_name = Column(String)
    ctrl_system_software_version = Column(String)
    value_8051 = Column(String)
    software_version = Column(String)
    to_real_time_package_version = Column(String)
    ctrl_system_config_version = Column(String)
    to_config_file_version = Column(String)
    value_8650 = Column(String)
    lccm_config_file_version = Column(String)

class EventReport(Base):
    __tablename__ = 'event_report'

    onboard_event_id = Column(BigInteger, primary_key=True)
    tripsum_id = Column(Integer, ForeignKey('trip_summary.tripsum_id'), index=True)
    subtrip_id = Column(BigInteger, index=True)
    cmu_time_gmt = Column(DateTime)
    reporting_locomotive_id = Column(String)
    event_type_id = Column(String)
    event_text = Column(String)
    train_id = Column(String)
    gps_latitude = Column(Float)
    gps_longitude = Column(Float)
    origin_id = Column(String)
    destination_id = Column(String)
    track_owning_rr_scac = Column(String)
    subdivision_name = Column(String)
    subdivision_id = Column(String)
    subdivision_ptc_id = Column(String)
    track_name = Column(String)
    mp_prefix = Column(String)
    mp_suffix = Column(String)
    supporting_data = Column(String)
    customer = Column(String)
    loco_activity_key = Column(String, ForeignKey('trip_summary.loco_activity_key'), index=True)
    loco_owning_rr_scac = Column(String)
    cca_latitude = Column(Float)
    cca_longitude = Column(Float)
    cca_supporting_data = Column(String)
    milepost = Column(String)
    origin_station_name = Column(String)
    origin_ptc_name = Column(String)
    destination_station_name = Column(String)
    destination_ptc_name = Column(String)
    subordinate_event_state = Column(String)
    current_em_state = Column(String)
    set_event_state = Column(String)
    set_gps_latitude = Column(Float)
    set_gps_longitude = Column(Float)
    set_to_real_system_time_gmt = Column(DateTime)
    set_gps_time_gmt = Column(DateTime, index=True)
    set_event_distance = Column(Float)
    set_supplemental_data = Column(String)
    set_track_scac = Column(String)
    set_track_region = Column(String)
    set_track_region_id = Column(String)
    set_track_region_ptc_id = Column(String)
    set_track_milepost = Column(String)
    set_track_mp_prefix = Column(String)
    set_track_mp_suffix = Column(String)
    set_track_name = Column(String)
    set_track_segment_id = Column(String)
    set_no_of_occurrence = Column(Integer)
    set_occurrence_time = Column(DateTime)
    set_occurrence_distance = Column(Float)
    clear_event_state = Column(String)
    clear_gps_latitude = Column(Float)
    clear_gps_longitude = Column(Float)
    clear_to_real_system_time_gmt = Column(DateTime)
    clear_gps_time_gmt = Column(DateTime, index=True)
    clear_event_distance = Column(Float)
    clear_supplemental_data = Column(String)
    clear_track_scac = Column(String)
    clear_track_region = Column(String)
    clear_track_region_id = Column(String)
    clear_track_region_ptc_id = Column(String)
    clear_track_milepost = Column(String)
    clear_track_mp_prefix = Column(String)
    clear_track_mp_suffix = Column(String)
    clear_track_name = Column(String)
    clear_track_segment_id = Column(String)
    clear_no_of_occurrence = Column(Integer)
    clear_occurrence_time = Column(DateTime)
    clear_occurrence_distance = Column(Float)


class SubTrip(Base):
    __tablename__ = 'sub_trip'

    id = Column(Integer, primary_key=True, autoincrement=True)
    tripsum_id = Column(Integer, index=True)
    subtrip_id = Column(BigInteger, unique=True)
    loco_activity_key = Column(String, ForeignKey('trip_summary.loco_activity_key'), index=True)
    train_id = Column(String)
    lead_loco = Column(String)
    start_time_gmt = Column(DateTime)
    trip_summary_time_gmt = Column(DateTime)
    trip_miles = Column(Float)
    auto_or_advsmt_avail_dist = Column(Float)
    auto_or_advsmt_dist = Column(Float)
    ptc_active_dist = Column(Float)
    origin_name = Column(String)
    origin_ptc_name = Column(String)
    destination_name = Column(String)
    destination_ptc_name = Column(String)
    operating_mode_name = Column(String)
    length = Column(Integer)
    weight = Column(Integer)
    traintype = Column(Integer)
    trail_units = Column(Integer)
    dpus = Column(Integer)
    dtm_used = Column(String)
    railcars = Column(Integer)
    num_eoc_cars = Column(Float)
    loads = Column(Integer)
    empties = Column(Integer)
    axles = Column(Integer)
    hpt = Column(Float)
    tpob = Column(Float)
    loco_details = Column(String)
    train_configuration_type = Column(String)
    cars_after_last_loco = Column(Integer)
    num_consist = Column(Integer)

class DataRecorder(Base):
    __tablename__ = 'data_recorder'

    id = Column(Integer, primary_key=True, autoincrement=True)
    tripsum_id = Column(Integer, ForeignKey('trip_summary.tripsum_id'), index=True)
    subtrip_id = Column(BigInteger, index=True)
    timestamp = Column(DateTime, index=True)
    totalsecs = Column(Integer)
    millisecs = Column(Integer)
    ptc_state = Column(Integer)
    ptc_addl_status = Column(Integer)
    valauxvars = Column(Integer)
    statevars = Column(Integer)
    syncauxvars = Column(Integer)
    curposreg = Column(BigInteger)
    curposseg = Column(BigInteger)
    curposoff = Column(Integer)
    curspdtgtst = Column(Integer)
    curspdtgttype = Column(Integer)
    curspdtgtrstap = Column(Integer)
    curspdtgtspd = Column(Integer)
    nxtspdtgtst = Column(Integer)
    nxtspdtgttype = Column(Integer)
    nxtspdtgtrstap = Column(Integer)
    nxtspdtgtspd = Column(Integer)
    nxtspdtgtseg = Column(BigInteger)
    nxtspdtgtoff = Column(Integer)
    nnxtspdtgtst = Column(Integer)
    nnxtspdtgttype = Column(Integer)
    nnxtspdtgtrstap = Column(Integer)
    nnxtspdtgtspd = Column(Integer)
    nnxtspdtgtseg = Column(BigInteger)
    nnxtspdtgtoff = Column(Integer)
    distance_miles = Column(Float)
    lead_locomotive = Column(String)
    equipment_speed = Column(Integer)
    current_em_access_screen = Column(Integer)
    em_access_screen_status = Column(Integer)
    num_speed_points = Column(Integer)
    ehi_comm_ok = Column(Integer)
    current_em_soft_key = Column(Integer)
    em_soft_key_status = Column(Integer)
    em_soft_key_color = Column(Integer)
    current_omb_text = Column(Integer)
    omb_text_status = Column(Integer)
    em_control_indicator = Column(Integer)
    em_control_status = Column(Integer)
    current_svp1_text = Column(Integer)
    svp1_status = Column(Integer)
    current_svp2_text = Column(Integer)
    svp2_status = Column(Integer)
    operating_mode = Column(Integer)
    ptc_event_id = Column(Integer)
    ptc_event_type = Column(Integer)
    trip_data_ack = Column(Integer)
    to_event_id = Column(Integer)
    operating_modes_bitpack = Column(Integer)
    ehi_state_vars = Column(Integer)
    ehi_misc_vars = Column(Integer)
    ehi_screen_vars = Column(Integer)
    ehi_display_error_vars = Column(Integer)
    health_status_bitpack = Column(Integer)
    cca_event_id = Column(Integer)
    aux_vars_bitpack = Column(Integer)
    ptc_change_location = Column(Float)
    equipment_speed = Column(Float)
    col_4000 = Column(Float)
    col_4250 = Column(Float)
    col_8211 = Column(Integer)
    col_8666 = Column(Integer)
    col_8669 = Column(Float)
    col_8670 = Column(Integer)
    col_8671 = Column(Integer)
    col_8674 = Column(Integer)
    col_8675 = Column(Integer)
    col_8682 = Column(Integer)
    col_8683 = Column(Integer)
    col_8684 = Column(Integer)
    col_8686 = Column(Float)
    col_8687 = Column(Float)
    col_8689 = Column(Float)
    col_8690 = Column(Float)
    col_8691 = Column(Integer)
    col_8692 = Column(Integer)
    col_8693 = Column(Integer)
    col_8697 = Column(Float)
    col_8698 = Column(Integer)
    col_8741 = Column(Float)
    col_8742 = Column(Float)
    col_8743 = Column(Integer)
    col_8745 = Column(Float)
    col_8752 = Column(Float)
    col_8753 = Column(Integer)
    col_8759 = Column(Float)
    col_8760 = Column(Integer)
    col_8762 = Column(Float)
    col_8765 = Column(Float)
    col_8766 = Column(Integer)
    col_8769 = Column(Float)
    col_8770 = Column(Integer)
    col_8779 = Column(Float)
    col_8780 = Column(Float)
    col_8781 = Column(Integer)
    col_8782 = Column(Float)
    col_8801 = Column(Float)
    col_8802 = Column(Float)
    col_8803 = Column(Float)
    col_8806 = Column(Float)
    col_8807 = Column(Float)
    col_8808 = Column(Float)
    col_8809 = Column(Float)
    col_8810 = Column(Float)
    col_8811 = Column(Float)
    col_8813 = Column(Float)
    col_8816 = Column(Float)
    col_8828 = Column(Float)
    col_8831 = Column(Float)
    col_8833 = Column(Float)
    col_8835 = Column(BigInteger)
    col_8836 = Column(Integer)
    col_8837 = Column(Float)
    col_8838 = Column(Float)
    col_8841 = Column(Float)
    col_8844 = Column(Float)
    col_8845 = Column(Float)
    col_8846 = Column(Float)
    col_8854 = Column(Float)
#    col_8855 = Column(Float)
    col_8865 = Column(Integer)
    col_8875 = Column(Float)
    col_8881 = Column(Float)
    col_8896 = Column(Float)
    col_8897 = Column(Float)
    col_8898 = Column(Float)
    col_8900 = Column(Integer)
    col_8905 = Column(Float)
    col_8908 = Column(Integer)
    col_8909 = Column(Integer)
    col_8920 = Column(Integer)
    col_8922 = Column(Integer)
    col_8923 = Column(Integer)
    col_8924 = Column(Float)
    col_8927 = Column(Integer)
    col_8929 = Column(Integer)
    col_8930 = Column(Float)
    col_8935 = Column(Integer)
    col_8936 = Column(Float)
    col_8945 = Column(Integer)
    col_8946 = Column(Integer)
    col_8947 = Column(Integer)
    col_8949 = Column(Integer)
    col_8959 = Column(Integer)
    col_8972 = Column(Integer)
    col_8975 = Column(Integer)
    col_8976 = Column(Integer)
    col_8978 = Column(Float)
    col_11900 = Column(Float)
    col_11901 = Column(Float)
    col_11902 = Column(Float)
    col_11904 = Column(Integer)
    col_11905 = Column(Float)
    col_11908 = Column(Integer)
    col_11910 = Column(Integer)
    col_11911 = Column(Integer)
    col_11915 = Column(Float)
    col_11916 = Column(Float)
    col_11917 = Column(Float)
    col_11918 = Column(Float)
    col_11919 = Column(Float)
    col_11920 = Column(Float)
    col_11921 = Column(Float)
    col_11922 = Column(Float)
    col_11923 = Column(Float)
    col_11924 = Column(Float)
    col_11925 = Column(Float)
    col_11926 = Column(Integer)
    col_11929 = Column(Float)
    col_11930 = Column(Float)
    col_11931 = Column(Float)
    col_11934 = Column(Float)
    col_11935 = Column(Float)
    col_11936 = Column(Float)
    col_11937 = Column(Float)
    col_11939 = Column(Integer)
    col_11940 = Column(Integer)
    col_11941 = Column(Float)
    col_11942 = Column(Float)
    col_11945 = Column(Float)
    col_11946 = Column(Float)
    col_11947 = Column(Float)
    col_11948 = Column(Float)
    col_11949 = Column(Float)
    col_11951 = Column(Float)
    col_11953 = Column(Float)
    col_11955 = Column(Float)
    col_11957 = Column(Float)
    col_11959 = Column(Float)
    col_11961 = Column(Float)
    col_11963 = Column(Float)
    col_11965 = Column(Float)
    col_11967 = Column(Float)
    col_11972 = Column(Float)
    col_11974 = Column(Integer)
    col_11975 = Column(Float)
    col_11978 = Column(Float)
    col_11979 = Column(Integer)
    col_11980 = Column(Float)
    col_11981 = Column(Float)
    col_11982 = Column(Float)
    col_11984 = Column(Integer)
    col_11985 = Column(Float)
    col_11990 = Column(Integer)
    col_11991 = Column(Integer)
    col_11995 = Column(Integer)
    col_11996 = Column(Float)
    col_11998 = Column(Float)
    col_11999 = Column(Float)
    col_18340 = Column(BigInteger)
    col_18349 = Column(Integer)
    col_18350 = Column(Integer)
    col_18381 = Column(BigInteger)
    col_18500 = Column(Integer)
    col_18501 = Column(Integer)
    col_18502 = Column(Integer)
    col_18503 = Column(Float)
    col_18508 = Column(Float)
    col_18509 = Column(Float)
    col_18510 = Column(Integer)
    col_18512 = Column(Integer)
    col_18515 = Column(Integer)
    col_18520 = Column(Integer)
    col_18524 = Column(Integer)
    col_18528 = Column(Integer)
    col_18531 = Column(Float)
    col_18532 = Column(Float)
    col_18533 = Column(Float)
    col_18535 = Column(Float)
    col_18536 = Column(Integer)
    col_18602 = Column(Integer)
    col_18603 = Column(Integer)
    col_18614 = Column(Integer)
    col_18635 = Column(Integer)
    col_18669 = Column(Integer)
    col_18672 = Column(Integer)
    col_18674 = Column(Integer)
    col_18719 = Column(Integer)
    col_18720 = Column(Integer)
    col_18756 = Column(Float)
    col_18758 = Column(Integer)
    col_18759 = Column(Integer)
    col_18763 = Column(Integer)
    col_18791 = Column(Integer)
    col_18796 = Column(Float)
    col_18797 = Column(Float)
    col_18800 = Column(Integer)
    col_18802 = Column(Float)
    col_20000 = Column(Integer)
    col_20002 = Column(Integer)
    col_20003 = Column(Integer)
    col_20004 = Column(Integer)
    col_20005 = Column(Integer)
    col_20014 = Column(Integer)
    col_20015 = Column(Integer)
    col_20017 = Column(Integer)
    col_20018 = Column(Integer)
    col_20019 = Column(Integer)
    col_20024 = Column(Integer)
    col_20025 = Column(Integer)
    col_20039 = Column(Integer)
    col_20063 = Column(Integer)
    col_20500 = Column(Integer)
    col_20502 = Column(Integer)
    col_20503 = Column(Integer)
    col_20504 = Column(Integer)
    col_20505 = Column(Integer)
    col_20506 = Column(Integer)
    col_20507 = Column(Integer)
    col_20510 = Column(Integer)
    col_20511 = Column(Integer)
    col_20521 = Column(Integer)
    col_20522 = Column(Integer)
    col_20532 = Column(Integer)
    col_20533 = Column(Integer)
    col_20534 = Column(Integer)
    col_20538 = Column(Integer)
    col_20539 = Column(Integer)
    col_20559 = Column(Float)
    col_20560 = Column(Float)
    col_20564 = Column(Integer)
    col_20566 = Column(Float)
    col_20575 = Column(Integer)
    col_20590 = Column(Float)
    col_20591 = Column(Float)
    col_20592 = Column(Float)
    col_20593 = Column(Float)
    col_20594 = Column(Float)
    col_20599 = Column(Float)
    col_20601 = Column(Float)
    col_20602 = Column(Integer)
    col_20607 = Column(Integer)
    col_20608 = Column(Integer)
    col_20609 = Column(Integer)
    col_20610 = Column(Integer)
    col_20611 = Column(Integer)
    col_20612 = Column(Integer)
    col_20613 = Column(Integer)
    col_20614 = Column(Integer)
    col_20615 = Column(Integer)
    col_20622 = Column(Float)
    col_20623 = Column(Float)
    col_20624 = Column(Float)
    col_20626 = Column(Integer)
    col_20627 = Column(Integer)
    col_20630 = Column(Integer)
    col_20631 = Column(Integer)
    col_20634 = Column(Integer)
    col_20635 = Column(Integer)
    col_20638 = Column(Integer)
    col_20642 = Column(Integer)
    col_20643 = Column(Integer)
    col_20646 = Column(Integer)
    col_20650 = Column(Integer)
    col_20654 = Column(Integer)
    col_20655 = Column(Integer)
    col_20658 = Column(Integer)
    col_20659 = Column(Integer)
    col_20662 = Column(Integer)
    col_20666 = Column(Integer)
    col_20678 = Column(Integer)
    col_20682 = Column(Integer)
    col_20683 = Column(Integer)
    col_20687 = Column(Integer)
    col_20691 = Column(Integer)
    col_20710 = Column(BigInteger)
    col_20715 = Column(Integer)
    col_20716 = Column(Integer)
    col_20717 = Column(Integer)
    col_20718 = Column(Integer)
    col_20721 = Column(Integer)
    col_20722 = Column(Integer)
    col_20723 = Column(Integer)
    col_20724 = Column(Integer)
    col_20734 = Column(Integer)
    col_20743 = Column(Integer)
    col_20745 = Column(Float)
    col_20746 = Column(Integer)
    col_20747 = Column(Integer)
    col_20748 = Column(Float)
    col_20749 = Column(Float)
    col_20750 = Column(Float)
    col_20757 = Column(Integer)
    col_20758 = Column(Integer)
    col_20759 = Column(Integer)
    col_20760 = Column(Integer)
    col_20782 = Column(Integer)
    col_20785 = Column(Float)
    col_20836 = Column(Integer)
    col_20837 = Column(Integer)
    col_20839 = Column(Integer)
    col_20843 = Column(Integer)
    col_20848 = Column(Integer)
    col_20856 = Column(Float)
    col_20857 = Column(Float)
    col_20858 = Column(Float)
    col_20859 = Column(Float)
    col_20860 = Column(Float)
    col_20862 = Column(Float)
    col_20863 = Column(Integer)
    col_20875 = Column(Integer)
    col_20882 = Column(Integer)
    col_20883 = Column(Float)
    col_20884 = Column(Float)
    col_20885 = Column(Float)
    col_20886 = Column(Integer)
    col_20887 = Column(Float)
    col_20926 = Column(Integer)
    col_20927 = Column(Float)
    col_20928 = Column(Integer)
    col_20929 = Column(Integer)
#    col_20936 = Column(BigInteger)
    col_20939 = Column(Float)
    col_20950 = Column(Integer)
    col_20951 = Column(Integer)
    col_20985 = Column(Integer)
    col_20987 = Column(Integer)
    col_31605 = Column(Integer)
    col_31621 = Column(Integer)
    col_31622 = Column(Integer)
    col_31624 = Column(Integer)
    col_31626 = Column(Integer)
    col_31628 = Column(Float)
    col_31629 = Column(Float)
    col_31634 = Column(Integer)
    col_31680 = Column(Float)
    col_31681 = Column(Integer)
    col_31683 = Column(Float)
